<html>
  <head>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
  </head>
  <body onload="flashMessage()">
    <a-scene>
      <script>
        function getBitcoinPrice() {
          return fetch('https://api.coindesk.com/v1/bpi/currentprice.json')
            .then(response => response.json())
            .then(data => 
              {
                console.log(data);
                return data.bpi.USD.rate
              });
        }
        function flashMessage() {
          if ("{{ flash_message }}" == "True") {
            getBitcoinPrice().then(price => {
              var sceneEl = document.querySelector('a-scene');
              console.log(sceneEl.querySelector('#bitcoin-price'));
              let priceText = `BTC Price: ${price}`;
              sceneEl.querySelector('#bitcoin-price').setAttribute('text', {value: priceText}); 
            });
          }
        }
      </script>
      
      <a-entity id="bitcoin-price" position="0.8 1.3 -1" text="value: Bitcoin price; color: #4CC3D9; width: 4; height: 4"></a-entity>

    </a-scene>
  </body>
</html>